编译原理这一块有一个柯里化的优化做得很好。
1、因为vue.js在不同的平台（浏览器和weex）下都会有编译的过程，因此编译过程中依赖的配置baseOptions也会有所不同。
2、vue利用了函数柯里化技巧实现了baseOptions的参数的保留。同样，vue.js也是利用函数柯里化把baseCompile函数抽出来，达到了把编译的过程和编译的配置及缓存处理等剥离的目的。


## 编译原理分3步
- 1、通过parse生成ast(抽象语法树)
    - 伪代码逻辑是：匹配到当前是否为注释节点、doctype节点、开始的标签节点、结束的标签节点，在不同情况下分别处理不同的逻辑；如果不满足上面的这个条件，则对父节点做一些逻辑处理。

- 2、对ast进行优化
    - 实现的函数是optimize，即对Ast抽象语法树进行深度优化（先标记静态节点，再标记静态根）。


- 3、将ast转化为代码字符串
    - 实现的是codegen方法。 整个codegen过程就是深度遍历ast树根据不同条件（判断是文本节点还是元素节点这些条件）生成不同代码的过程。




